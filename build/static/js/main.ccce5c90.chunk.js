(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAMWSURBVGhD7dlLqE1RHMfx65lXiDyjZEAyQF6lKEYYMFFkQpEJZcIlJW9JKaWMlKIoigwMRBITKaXklYEoeZQij8jz+9u1at1/66y912Vve9f51Wew11r3rv27zj57n6OjnXaalYE4jk94h51oXEbhPn4bK9GYqMRD2BJyFo3IaLQqIbdQ++SVkNoXUYlHCJ28r9ZFipaQ2hYZg6IlpJZFUktI7YqoxGOETjYmVmQOXuEEhmmg7IxFd0pIXpGv0LrXmIfS8jclJO+lNRk3obUqtQzdylBMNAZD0R37CezJpShyjfTGMWj9NyxE4QzHZdiNxf0TX0BoPkXKxe7K6LoZoYEi0TOQ3VR+og96Qk+xoTUpUopoz2vQz53RQJF8hN1U3kMZgtB8Kr/ITFzERvTXQCDj8AX6g07TQF5Cm0qZRbbCjT/DLIRyGFpzMjvKifuFVplFemAV7kFz2msqbPSG8wsf0E8DsdgNnTKLuPTFeWj+LlTQ5g40vyA7isTfzFdFEWUAXkJrlmjA5Cg0tyU7isTfzFdVEWU3tEYnbbMJrea6xN/MV2WRFdAa3a9sVkNzp7KjSPzNfFUWWQetCd0z1kJzeqCMxt/MV2WR09CabdlR17i36kPZUST+Zr6qiszAD3zHBA2YuCePNdlRJHZDp4oi8/EWmg9dzL2g5y3NT9JALP5mvjKLTMF1uLkr0D3FZjE0/yA7yon7ZVaZRXZAY5+xF3p8D+UGtC73HqI8h7+hoydeRd/jhuZT+UX0oLgU+iO1intLfoNBGsjLBthNHX3YUl4gNJ+i1cUeii56ffmtn1uvgaJZjnO4asyFshn2xFIVLaJPo0+hn7mkgX+dg7Anl6JIkelwL/Xb0HNYKTkAe4JFxYrobXYP9Dlda3WR6yN4qelumViRRdAa3RiPIPRWXEr2w55onlgRnfh2zM6OKs4+hE64laIX+39JSplaF1F0Zw6duFX7IorecUIn72tEESWvTGOKKO6zd4i+lm1UdiFURNdS49IJfbHmSujD0Ug0MvrPGz0F6OU2XgPttNO4dHT8AR1KHUa883P8AAAAAElFTkSuQmCC"},19:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAI6SURBVGhD7Zi7SgQxGEYXRRtBRcUb2GhjYa3gI9hY2tlpJWglWIh3wdbCVxBEBAsrS/UJBC9go42NgqClt+/bNRDCn8xk1wkJzIEDOxf4c3RndnYrJSVp0QYP4Ad8haswOfrgNfwxnIHJwIgbaEbQQ5gE/dAWQS9g9GRF0OhDGHELpcXrRh2SN4JGGzIA80bQKEN8I2h0IYy4g9JiXUYVMgjriaDRhDQSQYOFdMJhw3ZI+Il9D6UF5rXwkG54BqXhk5CcQOm4j4WH8BlIGvwFW2AT5FOsdI6PhYe8Q2nwGyQdUDruqxTCO2Br7aWTHthce2lHGkqLDhmFn/AScoaNBcjz9qpbDqShtOiQLvgEeewKSjGM+P5zljtcmAOVId5aI9AWo0cscUcW5kBliBAixXhHEHOgMlQI4WeWinmA3hHEHKgMGUIY8wLV+SvQC32YbugQ9XZS59tuAFb0YbohQ/RrYhdm3c1EzIHKUCHSha1fM4xRz3xOzIHKECGuu5N3jDlQWXTIGLRFKPRb8z53uDAHKosO4V/4GM5Vt+ww5hROVbccPEJpMJ94CX/HlY776rrY/4V5KA2m/LJF1L+3EQsPIdPwCJ4bTkCyCKXF+RgkJA+8v0sLzGs0IWQHSovMY1QhpN6Y6ELINpQW6zLKELIFpQXbjDaE+MREHUI2obRw0+hDyAaUFq+bRAjJikkmhKxDKYLyZ9mkWINSCK+l5FiG/J6hIp5hL0ySccinAL7dhrijpCQ5KpVfcpD6yzRGEiUAAAAASUVORK5CYII="},20:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAFpOLgnAAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAAd0SU1FB+IHFgMoMV7P1LMAAAK0SURBVGje7Zk9axRBGMd/uyFXKIE0JwiCncY7tNJCfAGNKfwCQb+A4HcQEbQ0JhBbv4HExhe8RsilkRgOyaUO2tgoyJkmyZm1eVaGyczuzs7s5Qj7h+F2Zp/3eebZZ/fAAQmwmXUzSSexspjijzZnQpPQ1UVGwjGbpdMNRisPIS4iJsX3TB1WRAVER86GmVTHlEBcIMxR3jasGW4mLvuWUCUaijmdIvuTZNHEPiGuniErlFPArs3ZJSVK6VoPeGBiaLpuZAKsKPO2rE3bnI40c3qy9rt0PsVUjEVgB+gDrdDCh1o81NEqW4Rcz2EUNG1969XxU+JUNIEF5XpWeL/kMXWF8LW2rheAfWDSx8DHCkOzAH23RAT+41nG+VDHrsErLzhbPJLsGju0pDDuAC+qUNCxbHgjlIJ2Rlbth1LSz0nf0v1msDJfl/payWiV7EnKTmlvmV4VWleyJb+XlbVXoT17KJZsWCzUx0LZZ42JcFLqVJaCN7L+qYiSr0K87RCBZpknZsqwWoD2lEL/yEXJtBaaGQvdiqNBxtfRvYLdylPfjLtj2PREaQCj0CleqoGrC2SNUF96loG/Oa3acuiXgJB4WbA2qGNp3JxYLOGE7aF0pBh4ODIIYUCoCp0ctR3HpjTWjtSO1I7UjgDwS6v55yx0Wx429C3r5zXdP30c+aDN71no5qW/csVQeE24r83f++zYWeCg4MtcA/uHQ9P4iP2D4gWN9gA445t+8wah13J4WtJDbUoLMpDr5+T/VXTd4PRcqLN0k8P/Y60S8BOtyOpqOoYFguaMCUvqbANXPeTeAL4Z5HaqrqongHcZud8DngC35DydlDED3JZ7vQz+t6JjpLgErHu08On4DFwchzY+xWngrqRLG7ii3V+X58aalPYfoRRHFe9YMip9da9VO1IR/gEnWVSkGraosQAAAABJRU5ErkJggg=="},21:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAFpOLgnAAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOwwAADsMBx2+oZAAAAAd0SU1FB+IHFgMpHAILuYcAAALtSURBVGje7Zo7aBRBGMd/d17QhENEIVFQRCsVC4OFgqLEgCIKNiKCoGBhQFKbRsHGFD4K0VZsBLWws1BiEVR8FFYiNooPAqJpNBFzkrtbi/tWxmH3dmZ35m43+Ifhbtmd+fb/vWfuwAKBelGOeeBG3M0S0Ge87DH9ho4e0iJIohCJR8Zrxy5RSqVo0xUC7Xu5HU0V15XFb2d6vYrpg0mOFOIEvjEEnLOdEACXbCeEY8R2QmCiqfO2qp0Ti5dMJ0T6YdSEfqBuYu2rQu4r8NgmusJxOClGmtq1UQRWIjz5Hyyy9LFtwBTwE3ju05EDoGZhRvMHNSwGGiKwAUz6EKKvsVux/BofQnRcdCVkTFyvFzjqyyYhasBdLbg/JWXqrCjZMhmWuFfD+U4ayRXLItXvivLJiIQUmbazogpMRyy+nYWCX2nUZRsndclVXoWE5eG0T3XNKE7wBtjiW0g4poEjvoWEY85nPQmxREqzVyEAKzshpOxKSEPSy3efLqz2iKulBQyN3/QhRDV6rBBXNqkBX+TTGxOvjYQzIVUPDcdfPJVUEXrOjLhvHYeGjMtRTmzyUBpqr/iW0Kk4YZLkDPfTlFIdy4GdbeZsdKWykQg1TaTY/iXuPMvKos00XUqnMC4Nxz1gWVGbzT1K31EHznQ7PaZFoMkZLioRPU72ArPANWBrkVxrKKGlnQfeA7d8W8s3EX00ZRP3AthcZCL6qAGnFgKRgNb541iegj0t+oDBPBEJgFfAx4xpvOtEmrQOD9cBS2UTeBb4ULQ6ovZcs8BL4AKwXvYivcB+4G0RiLTbpteAB8AmYG2eXcsGnyXjPQNuAqMmkyrkE5PAjqK5lhNkscguYJ/k+QFRyrycqUzg8WjKBa7IC9pWaO/7EVOLHKL1T44VedWwSYwMApcdkKh3m+xoSnfSj9NXdZvIBuBdBhI/pNDlAlUpTjYEfgPHO1WrSpbP90jTdwA4SOt3pQF56SngiTSHr6Wn+g9b/AExlzG/g9sS0gAAAABJRU5ErkJggg=="},22:function(e,t,n){e.exports=n.p+"static/media/soundtrack.f128f60f.mp3"},23:function(e,t,n){e.exports=n(39)},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(15),r=n(4),s=n(5),c=n(7),u=n(6),A=n(8),d=n(1),h=n(11),l=n.n(h),v=n(2),p=n(3),m=n(10),g=n.n(m),E=n(16),O=n.n(E),b=n(17),y=n.n(b),j=n(9),f=n.n(j),R=n(12),w=n(18),I=n.n(w),S=n(19),M=n.n(S),k=n(20),D=n.n(k),L=n(21),U=n.n(L),G=n(22),C=n.n(G),x=(n(36),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={musicLoaded:!1,liveInput:!1,soundOn:!0},n.toggleSound=n.toggleSound.bind(Object(d.a)(Object(d.a)(n))),n.toggleSoundInput=n.toggleSoundInput.bind(Object(d.a)(Object(d.a)(n))),n}return Object(A.a)(t,e),Object(s.a)(t,[{key:"getAudioData",value:function(){return this.analyser?Object(v.getFrequencyData)(this.analyser):[]}},{key:"toggleSound",value:function(){var e=this.soundToggle.gain,t=this.state.soundOn;this.setState({soundOn:!t}),e.value=t?0:1}},{key:"toggleSoundInput",value:function(){var e=Object(R.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.liveInput,this.liveSource){e.next=11;break}return e.prev=2,e.next=5,Object(v.createLiveSource)();case 5:this.liveSource=e.sent,this.liveSource.connect(this.liveInput),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:this.liveSource&&(this.liveInput.gain.value=t?0:1,this.musicInput.gain.value=t?1:0,this.setState({liveInput:!t}));case 12:case"end":return e.stop()}},e,this,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"fetchSource",value:function(){var e=Object(R.a)(f.a.mark(function e(){var t,n,a,i=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.animator,a=t.onReady,e.prev=1,e.next=4,Object(v.createMediaSource)(C.a,2e4);case 4:this.source=e.sent,this.source.element.loop=!0,this.source.connect(this.musicInput),n.startTime>0?this.source.start():n.onStart(function(){return i.source.start()}),n.onPause(function(){return i.source.pause()}),n.onResume(function(){return i.source.resume()}),n.onStop(function(){return i.source.stop()}),this.setState({musicLoaded:!0}),a(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),a();case 18:case"end":return e.stop()}},e,this,[[1,15]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.musicInput=Object(v.createGain)(),this.musicInput.gain.value=1,this.liveInput=Object(v.createGain)(),this.liveInput.gain.value=0,this.soundToggle=Object(v.createGain)(),this.analyser=Object(v.createAnalyser)(),this.liveInput.connect(this.analyser),this.musicInput.connect(this.soundToggle).connect(this.analyser).connect(v.destination),this.fetchSource()}},{key:"render",value:function(){var e=this.state,t=e.musicLoaded,n=e.liveInput,a=e.soundOn;return i.a.createElement("div",{id:"audio-player"},t&&i.a.createElement("div",{id:"audio-info",className:l()({show:a})},i.a.createElement("span",{id:"audio-title"},"Mirror\u2019s Edge Soundtrack - Introduction"),i.a.createElement("span",{id:"audio-author"},"Solar Fields")),t&&i.a.createElement("img",{id:"sound-toggle",src:a?I.a:M.a,alt:"Sound",onClick:this.toggleSound}),i.a.createElement("img",{id:"live-input-toggle",src:n?U.a:D.a,alt:"Sound input",onClick:this.toggleSoundInput}))}}]),t}(a.Component)),F=(n(37),255),B=new p.Matrix4,Q="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,Y=function(e){function t(e){var n;Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).animator=new g.a,n.animate=n.animate.bind(Object(d.a)(Object(d.a)(n))),n.onMouseMove=n.onMouseMove.bind(Object(d.a)(Object(d.a)(n))),n.onMouseOut=n.onMouseOut.bind(Object(d.a)(Object(d.a)(n))),n.onDO=n.onDO.bind(Object(d.a)(Object(d.a)(n))),n.onDM=n.onDM.bind(Object(d.a)(Object(d.a)(n))),n.onMO=n.onMO.bind(Object(d.a)(Object(d.a)(n))),n.scene=new p.Scene,n.camera=new p.PerspectiveCamera(50,1,1,1e3),n.camera.position.z=600,n.scene.add(n.camera),n.group=new p.Group,n.scene.add(n.group),n.meshes=[];for(var a=0;a<F;a++){var i=2*Math.random()-1,o=-a/F*Math.PI*2,s=new p.BoxGeometry(50,10,10);s.applyMatrix(B.makeTranslation(25,5,5));var A=new p.Mesh(s,new p.MeshNormalMaterial);A.position.set(0,0,0),A.rotation.set(0,i,o),A.scale.set(1,1,1),n.group.add(A),n.meshes.push(A)}return n.rotationX=0,n.rotationY=0,n}return Object(A.a)(t,e),Object(s.a)(t,[{key:"animate",value:function(e,t,n){var a=this.group,i=this.rotationX,o=this.rotationY,r=this.audio,s=this.ascii;a.rotation.x+=(i-a.rotation.x)*n*4,a.rotation.y+=(o-a.rotation.y)*n*4;var c=r.getAudioData();if(c.length>=F)for(var u=0;u<F;u++)this.meshes[u].scale.x=Math.max(1,c[u]/50);s.update()}},{key:"onResize",value:function(){this.ascii.update()}},{key:"onMouseMove",value:function(e){this.rotationX=.001*(e.clientY-window.innerHeight/2),this.rotationY=.001*(e.clientX-window.innerWidth/2)}},{key:"onMouseOut",value:function(){this.rotationX=0,this.rotationY=0}},{key:"onDO",value:function(e){var t=e.beta,n=e.gamma;this.tilt({x:t,y:n})}},{key:"onDM",value:function(e){var t=e.accelerationIncludingGravity;this.tilt({x:2*t.x,y:2*t.y})}},{key:"onMO",value:function(e){var t=e.x,n=e.y;this.tilt({x:50*t,y:50*n})}},{key:"tilt",value:function(e){var t=e.x,n=e.y;this.rotationX=.02*t,this.rotationY=.02*n}},{key:"start",value:function(){this.animator.start()}},{key:"componentDidMount",value:function(){var e=this.canvas,t=this.ascii;e.renderer.setClearColor(16777215),t.setCanvas(e.canvas),Q?window.DeviceOrientationEvent?window.addEventListener("deviceorientation",this.onDO,!0):window.DeviceMotionEvent?window.addEventListener("devicemotion",this.onDM,!0):window.addEventListener("MozOrientation",this.onMO,!0):(document.addEventListener("mousemove",this.onMouseMove,!1),document.addEventListener("mouseout",this.onMouseOut,!1))}},{key:"componentWillUnmount",value:function(){var e=this.animator;Q?window.DeviceOrientationEvent?window.removeEventListener("deviceorientation",this.onDO):window.DeviceMotionEvent?window.removeEventListener("devicemotion",this.onDM):window.removeEventListener("MozOrientation",this.onMO):(document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseout",this.onMouseOut)),e.stop()}},{key:"render",value:function(){var e=this,t=this.animator,n=this.scene,a=this.camera,o=this.props.onReady;return i.a.createElement("div",{id:"soundsphere"},i.a.createElement("div",{id:"canvas-wrapper",ref:function(t){return e.wrapper=t}},i.a.createElement(O.a,{id:"canvas",ref:function(t){return e.canvas=t},scene:n,camera:a,animator:t,animate:this.animate}),i.a.createElement(y.a,{id:"canvas-ascii",ref:function(t){return e.ascii=t}})),i.a.createElement(x,{ref:function(t){return e.audio=t},animator:t,onReady:o}))}}]),t}(a.Component),J=(n(38),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).onReady=n.onReady.bind(Object(d.a)(Object(d.a)(n))),n.onClick=n.onClick.bind(Object(d.a)(Object(d.a)(n))),n.state={ready:!1,interacted:!1},n}return Object(A.a)(t,e),Object(s.a)(t,[{key:"onReady",value:function(){this.setState({ready:!0})}},{key:"onClick",value:function(){var e=this;this.state.ready&&setTimeout(function(){Object(v.isReady)()&&(e.soundsphere.start(),e.setState({interacted:!0}))})}},{key:"render",value:function(){var e=this,t=this.state,n=t.ready,a=t.interacted;return i.a.createElement("div",{id:"app"},i.a.createElement(Y,{ref:function(t){return e.soundsphere=t},onReady:this.onReady}),i.a.createElement("div",{id:"start-overlay",className:l()({interacted:a})},i.a.createElement("div",{id:"start-button",onClick:this.onClick},n?"Start":"Loading...")))}}]),t}(a.Component));Object(o.render)(i.a.createElement(J,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.ccce5c90.chunk.js.map